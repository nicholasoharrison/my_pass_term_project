{% extends 'base.html' %}

{% block content %}
<h1>Saved Passwords</h1>

{% if saved_passwords %}
    <ul>
        {% for account in saved_passwords %}
            <li>
                <strong>{{ account.name }}:</strong>
                <!-- Initially show masked password -->
                <span id="password-{{ account.pk }}" class="masked-password">{{ account.password|slice:":6" }}******</span>
                <button class="button" onclick="showPassword({{ account.pk }}, '{{ account.password }}')">Show Password</button>
                <a href="{% url 'delete_password' account.pk %}" class="button">Delete</a>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No passwords saved yet.</p>
{% endif %}

<a href="{% url 'create_password' %}" class="button">Add New Password</a>

<script>
    // Function to toggle the visibility of the password
    function showPassword(accountId, fullPassword) {
        var passwordElement = document.getElementById('password-' + accountId);
        
        // Show the full password
        passwordElement.textContent = fullPassword;

        // Hide the full password after 3 seconds
        setTimeout(function() {
            passwordElement.textContent = fullPassword.slice(0, 6) + "******"; // Mask the password again
        }, 3000); // 3000ms = 3 seconds
    }
</script>

{% endblock %}
